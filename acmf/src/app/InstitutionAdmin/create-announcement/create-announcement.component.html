<div class="bg-white rounded-2xl shadow-md p-6 w-full max-w-2xl mx-auto border border-gray-100">
  <!-- Header -->
  <h2 class="text-lg font-semibold text-gray-800 mb-6 flex items-center gap-2">
    <span class="material-icons text-blue-600">campaign</span>
    {{ announcement ? 'Edit Announcement' : 'Create Announcement' }}
  </h2>

  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="submit()" class="space-y-6">
    <!-- Title -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Title</label>
      <input
        formControlName="title"
        type="text"
        placeholder="Add a catchy title..."
        class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      />
      <p *ngIf="form.get('title')?.touched && form.get('title')?.invalid" class="text-sm text-red-500 mt-1">
        Title is required.
      </p>
    </div>

    <!-- Content -->
    <div>
      <label class="block text-sm font-medium text-gray-700 mb-1">Content</label>
      <textarea
        formControlName="content"
        rows="4"
        placeholder="Write your announcement..."
        class="w-full border rounded-lg px-4 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
      ></textarea>
      <p *ngIf="form.get('content')?.touched && form.get('content')?.invalid" class="text-sm text-red-500 mt-1">
        Content is required.
      </p>
    </div>

    <!-- File Upload -->
    <div class="border rounded-lg p-4 bg-gray-50">
      <label class="text-sm font-medium text-gray-700">Attach files</label>
      <input
        type="file"
        multiple
        (change)="onFileSelected($event)"
        class="mt-2 block w-full text-sm text-gray-600"
      />

      <!-- File preview -->
      <div *ngIf="selectedFiles.length > 0" class="mt-3 space-y-2">
        <div
          *ngFor="let file of selectedFiles"
          class="flex items-center gap-3 bg-white border rounded-md p-2 shadow-sm"
        >
          <span class="material-icons text-gray-500 text-2xl">
            {{ file.type.startsWith('image/') ? 'image' : 'description' }}
          </span>
          <div class="flex-1">
            <p class="text-sm font-medium text-gray-800 truncate">{{ file.name }}</p>
            <p class="text-xs text-gray-500">{{ (file.size / 1024).toFixed(1) }} KB</p>
          </div>
          <button type="button" class="text-red-500 hover:text-red-700" (click)="removeFile(file)">
            <span class="material-icons text-sm">close</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex justify-end gap-3 pt-2">
      <button
        type="button"
        class="px-4 py-2 rounded-lg border border-gray-300 hover:bg-gray-100 transition"
        (click)="form.reset(); selectedFiles = []"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="loading || form.invalid"
        class="px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 transition"
      >
        {{ loading ? 'Saving...' : announcement ? 'Update' : 'Post' }}
      </button>
    </div>
  </form>
</div>
