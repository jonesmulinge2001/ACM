<div
  class="fixed top-0 left-0 right-0 z-55 bg-white shadow-sm px-4 py-3 h-16 flex items-center justify-between"
>
  <!-- Logo -->
  <div class="flex items-center space-x-2">
    <img
      src="academeet.jpeg"
      alt="academeet logo"
      class="h-8 w-8 rounded-full object-cover"
    />
    <span class="text-xl font-bold text-blue-600 hidden sm:inline"
      >Academeet</span
    >
  </div>

  <!-- Search Bar (hidden on small screens) -->
  <div
    class="hidden sm:flex items-center flex-1 max-w-xl mx-6 bg-gray-100 px-4 py-2 rounded-full border border-gray-200"
  >
    <span class="material-icons text-gray-500 mr-2">search</span>
    <input
      type="search"
      placeholder="Search students, posts, resources..."
      class="flex-1 bg-transparent outline-none text-sm text-gray-700"
    />
  </div>

  <!-- Engagement Icons -->
  <div class="flex items-center space-x-4">
    <!-- Search icon (only on small screens) -->
    <span class="material-icons text-gray-500 text-2xl cursor-pointer sm:hidden"
      >search</span
    >

    <!-- Notification with red dot -->
    <!-- Notifications -->
    <div class="relative">
      <!-- Bell -->
      <button
        (click)="toggleNotifPanel()"
        class="relative p-2 rounded-full hover:bg-gray-100"
      >
        <span class="material-icons text-gray-600 text-2xl">notifications</span>

        <!-- Red badge -->
        <span
          *ngIf="unreadCount > 0"
          class="absolute -top-1 -right-1 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full"
        >
          {{ unreadCount }}
        </span>
      </button>

      <!-- Notification dropdown -->
      <div *ngIf="notifPanelOpen" class="absolute right-0 mt-2 z-50">
        <!-- Use NotificationCenterComponent -->
        <app-notification-center
          (markAllNAsRead)="onNotificationsRead()"
        ></app-notification-center>
      </div>
    </div>

    <!-- Chat -->
    <span class="material-icons text-gray-500 text-2xl cursor-pointer"
      >chat</span
    >

    <!-- User Profile Dropdown -->
    <ng-container *ngIf="isLoggedIn; else guestlinksMobile">
      <div class="relative select-none" (click)="toggleMenu()">
        <!-- Profile Trigger -->
        <div class="flex items-center space-x-2 cursor-pointer group">
          <img
            [src]="userImage"
            class="w-8 h-8 rounded-full object-cover border border-gray-200 group-hover:border-blue-500 transition"
            alt="user"
          />
          <span
            class="text-sm font-medium hidden sm:inline text-gray-700 group-hover:text-blue-600"
          >
            {{ userName }}
          </span>
          <span
            class="material-icons text-gray-600 text-sm sm:inline hidden group-hover:text-blue-600"
          >
            expand_more
          </span>
        </div>

        <!-- Dropdown Menu -->
        <div
          *ngIf="menuOpen"
          class="absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-xl shadow-lg py-2 z-50 transform transition-all duration-200 ease-out origin-top opacity-100 scale-100 animate-fadeIn"
        >
          <!-- View Profile -->
          <button
            (click)="viewProfile()"
            class="flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 transition"
          >
            <span class="material-icons text-blue-500 text-lg mr-2"
              >person</span
            >
            View Profile
          </button>

          <!-- Logout -->
          <button
            (click)="logOut()"
            class="flex items-center w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition"
          >
            <span class="material-icons text-red-500 text-lg mr-2">logout</span>
            Logout
          </button>
        </div>
      </div>
    </ng-container>

    <ng-template #guestlinksMobile>
      <!-- Guest view (login/signup buttons) -->
    </ng-template>

    <ng-template #guestlinksMobile>
      <!-- Guest view, e.g., login link -->
    </ng-template>

    <ng-template #guestlinksMobile>
      <!-- Guest view, e.g., login link -->
    </ng-template>
  </div>
</div>
